#! /bin/sh
# kmchart QA Test No. 006
# $Revision: 1.1 $
#
# check units compatibility in view loading
#
# Copyright (c) 2007 Aconex.  All Rights Reserved.
#

seq=`basename $0`
echo "QA output created by $seq"

# get standard environment, filters and checks
. ./common.test

tmp=/tmp/$$
here=`pwd`
status=0	# success is the default!
trap "rm -f $tmp.*; exit \$status" 0 1 2 3 15

# real QA test starts here
PCP_STDERR=$tmp.post
for config in qa-view-01 qa-view-02 qa-view-03 qa-view-04 qa-view-05
do
    echo "=== $config ==="
    cat $config
    rm -f $tmp.post
    kmchart -CC -D appl0 -c $config >$tmp.out 2>$tmp.err
    echo "exit=$?"
    echo "--- out ---"
    cat $tmp.out
    echo "--- err ---"
    _filter_console <$tmp.err
    echo "--- post ---"
    if [ -f $tmp.post ]
    then
	_filter_post <$tmp.post
    fi
done

# success, all done
exit
