<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type"><title>Chapter 4. Monitoring System Performance</title><meta name="generator" content="DocBook XSL Stylesheets V1.51.1"><meta name="generator" content="SGI XSL DocBook Customization Stylesheets V1.1"><link rel="home" href="index.html" title="Performance Co-Pilot&#8482; for IA-64 Linux User's and Administrator's
Guide"><link rel="up" href="index.html" title="Performance Co-Pilot&#8482; for IA-64 Linux User's and Administrator's
Guide"><link rel="previous" href="ch03.html" title="Chapter 3. Common Conventions and Arguments"><link rel="next" href="ch05.html" title="Chapter 5. Performance Metrics Inference Engine"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 4. Monitoring System Performance</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch03.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch05.html">Next</a></td></tr></table><hr></div><!--CONTENT_BEGIN--><a name="sgi_start_content"></a><div class="chapter"><div class="titlepage"><div><h2 class="title"><a name="LE38515-PARENT"></a>Chapter 4. Monitoring System Performance</h2></div></div>
<p><a class="indexterm" name="IG31371888166"></a><a class="indexterm" name="IG31371888167"></a><a class="indexterm" name="IG31371888168"></a><a class="indexterm" name="Z1033415772tls"></a>This
chapter describes the performance monitoring tools available in Performance
Co-Pilot (PCP). This product provides a group of commands and tools for measuring
system performance. Each tool is described completely by its own man page.
The man pages are accessible through the <tt>man</tt> command. For
example, the man page for the tool <tt>pmdumptext</tt> is viewed
by entering the following command:</p>
<table bgcolor="#E0E0E0" width="90%" border="1" cellpadding="10"><tr><td><pre class="literallayout"><b><tt>man pmdumptext</tt></b></pre></td></tr></table><p>The following major sections are covered in this chapter:</p>
<div class="itemizedlist"><ul type="disc"><li><p><a name="Z930615099sdc"></a><a href="ch04.html#LE91266-PARENT" title="4.1. The pmkstat Command">Section 4.1</a>, discusses <tt>
pmkstat</tt>, a utility that provides a periodic one-line summary of
system performance.</p>
</li>
<li><p><a href="ch04.html#Z926977852sdc" title="4.2. The pmdumptext Command">Section 4.2</a>, discusses <tt>pmdumptext
</tt>, a utility that shows the current values for named performance
metrics.</p>
</li>
<li><p><a href="ch04.html#LE35315-PARENT" title="4.3. The pmval Command">Section 4.3</a>, describes <tt>pmval
</tt>, a utility that displays performance metrics in ASCII tables.</p>
</li>
<li><p><a href="ch04.html#LE60452-PARENT" title="4.4. The pminfo Command">Section 4.4</a>, describes <tt>pminfo
</tt>, a utility that displays information about performance metrics.
</p>
</li>
<li><p><a class="indexterm" name="IG31371888169"></a><a href="ch04.html#LE10170-PARENT" title="4.5. The pmstore Command">Section 4.5</a>, describes
the use of the <tt>pmstore</tt> utility to arbitrarily set or reset
selected performance metric values.</p>
</li>
</ul></div><p><a class="indexterm" name="IG31371888170"></a><a class="indexterm" name="IG31371888171"></a>The following sections describe the
various graphical and text-based PCP tools used to monitor local or remote
system performance.</p>
<div class="section"><div class="titlepage"><div><h2 class="title"><a name="LE91266-PARENT"></a>4.1. The <tt>pmkstat</tt> Command</h2></div></div>
<p><a class="indexterm" name="ITch04-20"></a> The <tt>pmkstat</tt> command
provides a periodic, one-line summary of system performance. This command
is intended to monitor system performance at the highest level, after which
other tools may be used for examining subsystems to observe potential performance
problems in greater detail. After entering the <tt>pmkstat</tt>
command, you see output similar to the following, with successive lines appearing
periodically:</p>
<table bgcolor="#E0E0E0" width="90%" border="1" cellpadding="10"><tr><td><pre class="literallayout"><b><tt>pmkstat</tt></b>
# <tt>hostname</tt> load avg: 0.26, interval: 5 sec, Thu Jan 19 12:30:13 2002
runq    | memory    |      system      | disks|   cpu 
mem swp | free page | scall ctxsw  intr| rd wr|usr sys idl wt
0   0     16268 0     64    19     2396  0  0  0   1   99  0
0   0     16264 0     142   45     2605  0  8  0   2   97  0
0   0     16268 0     308   62     2532  0  1  1   1   98  0
0   0     16268 0     423   88     2643  0  0  1   1   97  0</pre></td></tr></table><p>An additional line of output is added every five seconds. The update
interval may be varied using the <tt>-t </tt><i>interval
</i> option.</p>
<p>The output from <tt>pmkstat</tt> is directed to standard output,
and the columns in the report are interpreted as follows:</p>
<div class="variablelist"><table border="0" cellspacing="3"><tr valign="top"><td><span class="term"><tt>runq</tt></span></td><td width="10"> </td><td><p>Average number of runnable processes in main memory (<tt>mem</tt>) and in swap memory (<tt>swp</tt>) during the interval.
</p>

</td></tr><tr valign="top"><td><span class="term"><tt>memory</tt></span></td><td width="10"> </td><td><p>The free column indicates average <tt>free</tt>
memory during the interval, in kilobytes. The <tt>page</tt> column
is the average number of page-out operations per second during the interval.
I/O operations caused by these page-out operations are included in the disk
write I/O rate.</p>

</td></tr><tr valign="top"><td><span class="term"><tt>system</tt></span></td><td width="10"> </td><td><p>System call rate (<tt>scall</tt>), context switch
rate (<tt>ctxsw</tt>), and interrupt rate (<tt>intr</tt>).
Rates are expressed as average operations per second during the interval.
</p>

</td></tr><tr valign="top"><td><span class="term"><tt>disks</tt></span></td><td width="10"> </td><td><p>Aggregated physical read (<tt>rd</tt>) and write
(<tt>wr</tt>) rates over all disks, expressed as physical I/O operations
issued per second during the interval. These rates are independent of the
I/O block size.</p>

</td></tr><tr valign="top"><td><span class="term"><tt>cpu</tt></span></td><td width="10"> </td><td><p>Percentage of CPU time spent executing user code (<tt>usr</tt>), system and interrupt code (<tt>sys</tt>), idle loop
(<tt>idl</tt>) and idle waiting for resources (<tt>wt</tt>),
typically disk I/O.</p>

</td></tr></table></div><p>As with most PCP utilities, real-time metric, and archive logs are interchangeable.
</p>
<p>For example, the following command uses the PCP archive log <i>
foo</i> and the timezone of the host (<tt>tokyo</tt>)
from which performance metrics in the archive were collected:</p>
<table bgcolor="#E0E0E0" width="90%" border="1" cellpadding="10"><tr><td><pre class="literallayout"><b><tt>pmkstat -a </tt></b><i>foo</i> <b><tt>-z</tt></b>
Note: timezone set to local timezone of host &quot;tokyo&quot;
# tokyo load avg: 1.06, interval: 5 sec, Thu Feb  2 08:42:55 2002
 runq  |     memory |     system       |  disks  |      cpu
mem swp|   free page| scall ctxsw  intr|  rd   wr|usr sys idl  wt
  0   0    4316    0    195    64  2242   32   21   0   3   8  89
  0   0    3976    0    279    86  2143   50   17   0   5   8  87
  1   0    3448    0    186    63  2304   35   14   0   4   9  87
  0   0    4364    0    254    81  2385   35    0   0   4   9  87
  0   0    3696    0    266    92  2374   41    0   0   3   9  88
  0   0    2668   42    237    81  2400   44    2   1   4   7  89
  0   0    4644  100    206    68  2590   25    1   0   3   5  91
  0   0    5384    0    174    63  2296   32   22   0   2   8  89
  0   0    4736    0    189    65  2197   31   28   0   3   8  89
pmFetch: End of PCP archive log</pre></td></tr></table><p>For complete information on <tt>pmkstat</tt> usage and command
line options, see the <tt>pmkstat(1)</tt> man page.
</p>
</div><div class="section"><div class="titlepage"><div><h2 class="title"><a name="Z926977852sdc"></a>4.2. The <tt>pmdumptext</tt> Command</h2></div></div>
<p><a class="indexterm" name="IG31371888172"></a>The <tt>pmdumptext</tt> command displays
performance metrics in ASCII tables, suitable for export into databases or
report generators. It is a flexible command. For example, the following command
provides continuous memory statistics on a host named <tt>serv</tt>:
</p>
<table bgcolor="#E0E0E0" width="90%" border="1" cellpadding="10"><tr><td><pre class="literallayout"><b><tt>pmdumptext -imu -h </tt></b><b><tt>serv</tt></b><b><tt> -f `%H:%M:%S' mem.util</tt></b>
Metric        kernel  fs_ctl  _dirty  _clean    free    user 
      Units             b       b       b       b       b       b 
20:14:28        99.14M   6.03M   0.85M  98.42M   0.17G   0.16G </pre></td></tr></table><p>See the <tt>pmdumptext(1)</tt> man page for more
information.</p>
</div><div class="section"><div class="titlepage"><div><h2 class="title"><a name="LE35315-PARENT"></a>4.3. The <tt>pmval</tt> Command</h2></div></div>
<p><a class="indexterm" name="ITch04-23"></a> The <tt>pmval</tt> command dumps the current
values for the named performance metrics. For example, the following command
reports the value of performance metric <tt>proc.nprocs</tt> once
per second (by default), and produces output similar to this:</p>
<table bgcolor="#E0E0E0" width="90%" border="1" cellpadding="10"><tr><td><pre class="literallayout"><b><tt>pmval proc.nprocs</tt></b>
etric:    proc.nprocs
host:      localhost
semantics: discrete instantaneous value
units:     none
samples:   all
interval:  1.00 sec
         81
         81
         81
         81
         81</pre></td></tr></table><p>In this example, the number of running processes was reported once per
second.</p>
<p>Where the semantics of the underlying performance metrics indicate that
it would be sensible, <tt>pmval</tt> reports the rate of change
or resource utilization.</p>
<p>For example, the following command reports idle processor utilization
for each of four CPUs on the remote host <tt>moomba</tt>, each five
seconds apart, producing output of this form:</p>
<table bgcolor="#E0E0E0" width="90%" border="1" cellpadding="10"><tr><td><pre class="literallayout"><b><tt>pmval -h dove -t 5sec -s 4 kernel.percpu.cpu.idle</tt></b>
metric:    kernel.percpu.cpu.idle
host:      dove
semantics: cumulative counter (converting to rate)
units:     millisec (converting to time utilization)
samples:   4
interval:  5.00 sec

cpu:1.1.0.a cpu:1.1.0.c cpu:1.1.1.a cpu:1.1.1.c 
     1.000       0.9998      0.9998      1.000  
     1.000       0.9998      0.9998      1.000  
     0.8989      0.9987      0.9997      0.9995 
     0.9568      0.9998      0.9996      1.000  
</pre></td></tr></table><p>Similarly, the following command reports disk I/O read rate every minute
for just the disk <tt>/dev/dsk/dks0d1</tt>, and produces output
similar to the following:</p>
<table bgcolor="#E0E0E0" width="90%" border="1" cellpadding="10"><tr><td><pre class="literallayout"><b><tt>pmval -t 1min -i dks0d1 disk.dev.read</tt></b>
metric:    disk.dev.read
host:      localhost
semantics: cumulative counter (converting to rate)
units:     count (converting to count / sec)
samples:   indefinite
interval:  60.00 sec
        dks0d1 
         33.67 
         48.71 
         52.33 
         11.33 
         2.333 </pre></td></tr></table><p>The <tt>-r</tt> flag may be used to suppress the rate calculation
(for metrics with counter semantics) and display the raw values of the metrics.
</p>
<p>In the example below, manipulation of the time within the archive is
achieved by the exchange of time control messages between <tt>pmval</tt>
and <tt>pmtime</tt>.</p>
<table bgcolor="#E0E0E0" width="90%" border="1" cellpadding="10"><tr><td><pre class="literallayout"><b><tt>pmval -g -a /var/log/pcp/pmlogger/myserver/960801</tt></b></pre></td></tr></table><p><a class="indexterm" name="IG31371888173"></a>The <tt>pmval</tt> command is documented by the <tt>pmval(1)</tt> man page, and annotated examples of the use
of <tt>pmval</tt> are in the <i>PCP Tutorial</i>.
</p>
</div><div class="section"><div class="titlepage"><div><h2 class="title"><a name="LE60452-PARENT"></a>4.4. The <tt>pminfo</tt> Command</h2></div></div>
<p><a class="indexterm" name="ITch04-25"></a>The <tt>pminfo</tt> command displays
various types of information about performance metrics available through the
Performance Co-Pilot (PCP) facilities.</p>
<p>The <tt>-T</tt> option is extremely useful; it provides help
text about performance metrics:</p>
<table bgcolor="#E0E0E0" width="90%" border="1" cellpadding="10"><tr><td><pre class="literallayout"><b><tt>pminfo -T mem.util.fs_dirty</tt></b>
mem.util.fs_dirty
Help:
The amount of memory in Kbytes that is holding file system data.</pre></td></tr></table><p>The <tt>-t</tt> option displays the one-line help text associated
with the selected metrics. The <tt>-T</tt> option prints more verbose
help text.</p>
<p>Without any options, <tt>pminfo</tt> verifies that the specified
metrics exist in the Name Space, and echoes those names. Metrics may be specified
as arguments to <tt>pminfo</tt> using their full metric names. For
example, this command returns the following response:</p>
<table bgcolor="#E0E0E0" width="90%" border="1" cellpadding="10"><tr><td><pre class="literallayout"><b><tt>pminfo hinv.ncpu network.interface.total.bytes</tt></b>
hinv.ncpu 
network.interface.total.bytes </pre></td></tr></table><p>A group of related metrics in the Name Space may also be specified.
For example, to list all of the <tt>hinv</tt> metrics you would
use this command:</p>
<table bgcolor="#E0E0E0" width="90%" border="1" cellpadding="10"><tr><td><pre class="literallayout"><b><tt>pminfo hinv</tt></b>
hinv.physmem
hinv.pagesize
hinv.ncpu
hinv.ndisk
hinv.nfilesys
hinv.machine
hinv.map.scsi
hinv.map.cpu_num
hinv.map.cpu
hinv.map.disk
hinv.map.node
hinv.map.router
hinv.map.routerport
hinv.map.xbow
hinv.cpu.clock
hinv.cpu.vendor
hinv.cpu.model
hinv.cpu.stepping
hinv.cpu.cache
hinv.cpu.bogomips
hinv.nnode
hinv.nrouter
hinv.nrouterport
hinv.nxbow
hinv.interconnect</pre></td></tr></table><p>If no metrics are specified, <tt>pminfo</tt> displays the
entire collection of metrics. This can be useful for searching for metrics,
when only part of the full name is known. For example, this command returns
the following response:</p>
<table bgcolor="#E0E0E0" width="90%" border="1" cellpadding="10"><tr><td><pre class="literallayout"><b><tt>pminfo | grep nfs</tt></b>
nfs.client.calls
nfs.client.reqs
nfs.server.calls
nfs.server.reqs
nfs3.client.calls
nfs3.client.reqs
nfs3.server.calls
nfs3.server.reqs</pre></td></tr></table><p>The <tt>-d</tt> option causes <tt>pminfo</tt> to
display descriptive information about metrics (refer to the <tt>
pmLookupDesc(3)</tt> man page for an explanation of this metadata information).
The following command and response show use of the <tt>-d</tt> option:
</p>
<table bgcolor="#E0E0E0" width="90%" border="1" cellpadding="10"><tr><td><pre class="literallayout"><b><tt>pminfo -d proc.nprocs disk.dev.read filesys.free</tt></b>
proc.nprocs
    Data Type: 32-bit unsigned int  InDom: PM_INDOM_NULL 0xffffffff
    Semantics: discrete  Units: none

disk.dev.read
    Data Type: 32-bit unsigned int  InDom: 60.1 0xf000001
    Semantics: counter  Units: count

filesys.free
    Data Type: 64-bit unsigned int  InDom: 60.5 0xf000005
    Semantics: instant  Units: Kbyte</pre></td></tr></table><p>The <tt>-f</tt> option to <tt>pminfo</tt> forces
the current value of each named metric to be fetched and printed. In the example
below, all metrics in the group <tt>hinv</tt> are selected:</p>
<table bgcolor="#E0E0E0" width="90%" border="1" cellpadding="10"><tr><td><pre class="literallayout"><b><tt>pminfo -f hinv</tt></b>
hinv.physmem
    value 15701

hinv.pagesize
    value 16384

hinv.ncpu
    value 4

hinv.ndisk
    value 6

hinv.nfilesys
    value 2

hinv.machine
    value &quot;IP35&quot;

hinv.map.scsi
No value(s) available!

hinv.map.cpu_num
    inst [0 or &quot;cpu:1.1.0.a&quot;] value 0
    inst [1 or &quot;cpu:1.1.0.c&quot;] value 1
    inst [2 or &quot;cpu:1.1.1.a&quot;] value 2
    inst [3 or &quot;cpu:1.1.1.c&quot;] value 3

hinv.map.cpu
    inst [0 or &quot;cpu:1.1.0.a&quot;] value &quot;/dev/hw/module/001c01/slab/0/node/cpubus/0/a&quot;
    inst [1 or &quot;cpu:1.1.0.c&quot;] value &quot;/dev/hw/module/001c01/slab/0/node/cpubus/0/c&quot;
    inst [2 or &quot;cpu:1.1.1.a&quot;] value &quot;/dev/hw/module/001c01/slab/1/node/cpubus/0/a&quot;
    inst [3 or &quot;cpu:1.1.1.c&quot;] value &quot;/dev/hw/module/001c01/slab/1/node/cpubus/0/c&quot;
hinv.map.disk
No value(s) available!

hinv.map.node
    inst [0 or &quot;node:1.1.0&quot;] value &quot;/dev/hw/module/001c01/slab/0/node&quot;
    inst [1 or &quot;node:1.1.1&quot;] value &quot;/dev/hw/module/001c01/slab/1/node&quot;

hinv.map.router
No value(s) available!

hinv.map.routerport
No value(s) available!

hinv.map.xbow
No value(s) available!

hinv.cpu.clock
    inst [0 or &quot;cpu:1.1.0.a&quot;] value 800
    inst [1 or &quot;cpu:1.1.0.c&quot;] value 800
    inst [2 or &quot;cpu:1.1.1.a&quot;] value 800
    inst [3 or &quot;cpu:1.1.1.c&quot;] value 800

hinv.cpu.vendor
    inst [0 or &quot;cpu:1.1.0.a&quot;] value &quot;GenuineIntel&quot;
    inst [1 or &quot;cpu:1.1.0.c&quot;] value &quot;GenuineIntel&quot;
    inst [2 or &quot;cpu:1.1.1.a&quot;] value &quot;GenuineIntel&quot;
    inst [3 or &quot;cpu:1.1.1.c&quot;] value &quot;GenuineIntel&quot;

hinv.cpu.model
    inst [0 or &quot;cpu:1.1.0.a&quot;] value &quot;0&quot;
    inst [1 or &quot;cpu:1.1.0.c&quot;] value &quot;0&quot;
    inst [2 or &quot;cpu:1.1.1.a&quot;] value &quot;0&quot;
    inst [3 or &quot;cpu:1.1.1.c&quot;] value &quot;0&quot;

hinv.cpu.stepping
    inst [0 or &quot;cpu:1.1.0.a&quot;] value &quot;6&quot;
    inst [1 or &quot;cpu:1.1.0.c&quot;] value &quot;6&quot;
    inst [2 or &quot;cpu:1.1.1.a&quot;] value &quot;6&quot;
    inst [3 or &quot;cpu:1.1.1.c&quot;] value &quot;6&quot;

hinv.cpu.cache
    inst [0 or &quot;cpu:1.1.0.a&quot;] value 0
    inst [1 or &quot;cpu:1.1.0.c&quot;] value 0
    inst [2 or &quot;cpu:1.1.1.a&quot;] value 0
    inst [3 or &quot;cpu:1.1.1.c&quot;] value 0

hinv.cpu.bogomips
    inst [0 or &quot;cpu:1.1.0.a&quot;] value 1195.37
    inst [1 or &quot;cpu:1.1.0.c&quot;] value 1195.37
    inst [2 or &quot;cpu:1.1.1.a&quot;] value 1195.37
    inst [3 or &quot;cpu:1.1.1.c&quot;] value 1195.37

hinv.nnode
    value 2

hinv.nrouter
    value 0

hinv.nrouterport
    value 0

hinv.nxbow
Error: Functionality not yet implemented

hinv.interconnect
No value(s) available!</pre></td></tr></table><p>The <tt>-h</tt> option directs <tt>pminfo</tt> to
retrieve information from the specified host. If the metric has an instance
domain, the value associated with each instance of the metric is printed:
</p>
<table bgcolor="#E0E0E0" width="90%" border="1" cellpadding="10"><tr><td><pre class="literallayout"><b><tt>pminfo -h dove.americas.sgi.com -f filesys.mountdir</tt></b>
filesys.mountdir
    inst [0 or &quot;/dev/xscsi/pci00.01.0/target81/lun0/part3&quot;] value &quot;/&quot;
    inst [1 or &quot;/dev/xscsi/pci00.01.0/target81/lun0/part1&quot;] value &quot;/boot/efi&quot;</pre></td></tr></table><p><a class="indexterm" name="IG31371888174"></a>The <tt>-m</tt> option prints the Performance Metric Identifiers (PMIDs) of the
selected metrics. This is useful for finding out which PMDA supplies the metric.
For example, the output below identifies the PMDA supporting domain 4 (the
leftmost part of the PMID) as the one supplying information for the metric <tt>environ.extrema.mintemp</tt>:</p>
<table bgcolor="#E0E0E0" width="90%" border="1" cellpadding="10"><tr><td><pre class="literallayout">pminfo -m environ.extrema.mintemp 
environ.extrema.mintemp PMID: 4.0.3 </pre></td></tr></table><p>The <tt>-v</tt> option verifies that metric definitions in
the PMNS correspond with supported metrics, and checks that a value is available
for the metric. Descriptions and values are fetched, but not printed. Only
errors are reported.</p>
<p>Some instance domains are not enumerable. That is, it is not possible
to ask for all of the instances at once. Only explicit instances may be fetched
from such instance domains. This is because instances in such a domain may
have a very short lifetime or the cost of obtaining all of the instances at
once is very high. The <i>proc</i> metrics are an example
of such an instance domain. The <tt>-f</tt> option is not able to
fetch metrics with non-enumerable instance domains; however, the <tt>-F</tt> option tells <tt>pminfo</tt> to obtain a snapshot of
all of the currently available instances in the instance domain and then to
retrieve a value for each.</p>
<p><a class="indexterm" name="IG31371888175"></a><a class="indexterm" name="IG31371888176"></a>Complete information on the <tt>pminfo</tt>
command is found in the <tt>pminfo(1)</tt> man page.
There are examples of the use of <tt>pminfo</tt> in the <i>
PCP Tutorial</i>.</p>
</div><div class="section"><div class="titlepage"><div><h2 class="title"><a name="LE10170-PARENT"></a>4.5. The <tt>pmstore</tt> Command</h2></div></div>
<p><a class="indexterm" name="ITch04-26"></a>From time to time you may wish to change
the value of a particular metric. Some metrics are counters that may need
to be reset, and some are simply control variables for agents that collect
performance metrics. When you need to change the value of a metric for any
reason, the command to use is <tt>pmstore</tt>.</p>
<div class="note"><hr noshade="noshade"><table border="0"><tr><td align="center" valign="top" width="25"><img src="figures/note.png" height="24" width="24"></td><td align="left" valign="top"><b>Note: </b>For obvious reasons, the ability to arbitrarily change the value
of a performance metric is not supported. Rather, the PMCS selectively allows
some metrics to be modified in a very controlled fashion.
</td></tr></table><hr noshade="noshade"></div><p>The basic syntax of the command is as follows:</p>
<table bgcolor="#E0E0E0" width="90%" border="1" cellpadding="10"><tr><td><pre class="literallayout">pmstore <i>metricname</i> <i>value</i> </pre></td></tr></table><p>There are also command line flags to further specify the action. For
example, the <tt>-i</tt> option restricts the change to one or more
instances of the performance metric.</p>
<p>The <i>value</i> may be in one of several forms,
according to the following rules:</p>
<div class="orderedlist"><ol type="1"><li><p>If the metric has an integer type, then <i>
value</i> should consist of an optional leading hyphen, followed
either by decimal digits or &#8220;0x&#8221; and some hexadecimal digits; &#8220;0X&#8221;
is also acceptable instead of &#8220;0x.&#8221;</p>
</li>
<li><p>If the metric has a floating point type, then <i>
value</i> should be in the form of an integer (described above),
a fixed point number, or a number in scientific notation.</p>
</li>
<li><p>If the metric has a string type, then <i>
value</i> is interpreted as a literal string of ASCII characters.
</p>
</li>
<li><p>If the metric has an aggregate type, then an attempt
is made to interpret <i>value</i> as an integer, a floating
point number, or a string. In the first two cases, the minimal word length
encoding is used; for example, &#8220;123&#8221; would be interpreted as a
four-byte aggregate, and &#8220;0x100000000&#8221; would be interpreted as
an eight-byte aggregate.</p>
</li>
</ol></div><p>The following example illustrates the use of <tt>pmstore</tt>
to enable performance metrics collection in the <tt>txmon</tt> PMDA
(see <tt>/var/pcp/pmdas/txmon</tt> for the source code of the txmon
PMDA). When the metric <tt>txmon.control.level</tt> has the value
0, no performance metrics are collected. Values greater than 0 enable progressively
more verbose instrumentation.</p>
<table bgcolor="#E0E0E0" width="90%" border="1" cellpadding="10"><tr><td><pre class="literallayout"><b><tt>pminfo -f txmon.count</tt></b>
txmon.count
No value(s) available!
<b><tt>pmstore txmon.control.level 1</tt></b>
txmon.control.level old value=0 new value=1
<b><tt>pminfo -f txmon.count</tt></b>
txmon.count
       inst [0 or &quot;ord-entry&quot;] value 23
       inst [1 or &quot;ord-enq&quot;] value 11
       inst [2 or &quot;ord-ship&quot;] value 10
       inst [3 or &quot;part-recv&quot;] value 3
       inst [4 or &quot;part-enq&quot;] value 2
       inst [5 or &quot;part-used&quot;] value 1
       inst [6 or &quot;b-o-m&quot;] value 0</pre></td></tr></table><p>For complete information on <tt>pmstore</tt> usage and syntax,
see the <tt>pmstore(1)</tt> man page.</p>
</div></div><!--CONTENT_END--><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch03.html">Prev</a> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Table of Contents</a></td><td width="40%" align="right"> <a accesskey="n" href="ch05.html">Next</a></td></tr><tr><td width="40%" align="left">Chapter 3. Common Conventions and Arguments </td><td width="20%" align="center"> </td><td width="40%" align="right">Chapter 5. Performance Metrics Inference Engine </td></tr></table></div></body></html>
