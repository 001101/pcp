.\" Copyright (c) 2006, Ken McDonell.  All Rights Reserved.
.ie \(.g \{\
.\" ... groff (hack for khelpcenter, man2html, etc.)
.TH KMCHART 1 "" "Performance Co-Pilot"
\}
.el \{\
.if \nX=0 .ds x} KMCHART 1 "" "Performance Co-Pilot"
.if \nX=1 .ds x} KMCHART 1 "Performance Co-Pilot"
.if \nX=2 .ds x} KMCHART 1 "" "\&"
.if \nX=3 .ds x} KMCHART "" "" "\&"
.TH \*(x}
.rr X
\}
.SH NAME
\f3kmchart\f1 \- stripchart tool for Performance Co-Pilot
.SH SYNOPSIS
\f3kmchart\f1
[\f3\-a\f1 \f2archive\f1]
[\f3\-c\f1 \f2configfile\f1]
[\f3\-C\f1]
[\f3\-h\f1 \f2host\f1]
[\f3\-t\f1 \f2interval\f1]
[\f3\-v\f1 \f2samples\f1]
.SH DESCRIPTION
.B kmchart
is a replacement for SGI's
.B pmchart
tool.
.PP
.B kmchart
\&...

.PP
Other options control the output of additional information when
one or more values is available.
.TP 5
.B \-f
When used with ...
.TP
.B \-I
Report the external identifiers for each instance. 
.SH CONFIGURATION FILE SYNTAX
.de ES
.ft CW
.nf
.in +0.5i
..
.de EE
.ft R
.br
.in
.fi
..
.PP
.B kmchart
loads predefined chart configurations (or ``views'') from external
files that conform to the following rules.  In the descriptions below
keywords (shown in \f(CBbold\fP) may appear in upper, lower or
mixed case, elements show \f(CW[stuff]\fP are optional, and
user-supplied elements are shown as \f(CW<other stuff>\fP.
A vertical bar (|) is used where syntactic elements are alternatives.
Quotes (")
may be used to enclose lexical elements that may contain white space,
such as titles, labels and instance names.
.IP 1. 0.3i
The first line defines the configuration file type and should be
.ES
\f(CB#kmchart\fP
.EE
although
.B kmchart
provides backwards compatibility for
.B pmchart
with an initial line of
.ES
\f(CB#pmchart\fP
.EE
.RS
.PP
There is no support for executable views
.ES
\f(CB#!/bin/sh\fP
.EE
as yet.
.RE
.IP 2. 0.3i
After the first line, lines beginning with ``#'' as the first
non-white space character are treated as comments and skipped.
Similarly blank lines are skipped.
.IP 3. 0.3i
The next line should be
.ES
\f(CBversion\fP <n> <host-clause>
.EE
where \f(CW<n>\fP depends on the configuration file type, and
is \f(CB1\fP for \f(CBkmchart\fP else \f(CB1.1\fP, \f(CB1.2\fP or
\f(CB2.0\fP for \f(CBpmchart\fP.
.RS
The \f(CW<host-clause>\fP part is optional (and ignored)
for \fBkmchart\fP configuration
files, but required for the \fBpmchart\fP configuration files, and
is of the form
.ES
\f(CBhost\fP \f(CBliteral\fP
.EE
or
.ES
\f(CBhost\fP \f(CBdynamic\fP
.EE
.RE
.IP 4. 0.3i
A configuration contains one or more charts defined as follows:
.ES
\f(CBchart\fP [\f(CBtitle\fP <title>] \f(CBstyle\fP <style> <options>
.EE
If specified, the title will appear centred and above the graph area
of the chart.
The \f(CW<title>\fP is usually enclosed in quotes (") and if it
contains the sequence ``%h'' this will be replaced by the short form
of the hostname for the default source of metrics at the time
this chart was loaded.
After the view is loaded, the title visibility and setting
can be manipulated using the
.I "Chart Title"
text box in the
.I "Edit\(->Chart Title and Legend"
dialog.
.RS
.PP
The \f(CW<style>\fP controls the initial plotting style of the chart, and
should be one of the keywords \f(CBplot\fP (line graph), \f(CBbar\fP,
\f(CBstacking\fP (stacked bar),
\f(CBarea\fP or \f(CButilization\fP.
After the view is loaded, the plotting style can be changed using the
.I "Edit\(->Chart Style"
dropdown list.
.PP
The \f(CW<options>\fP are zero or more of the optional elements:
.ES
[\f(CBscale\fP [from] <ymin> [to] <ymax>] [\f(CBlegend\fP <onoff>]
.EE
If \f(CBscale\fP is specfied, the vertical scaling is set for all plots
in the chart to a y-range defined by \f(CW<ymin>\fP and \f(CW<ymax>\fP.
Otherwise the
vertical axis will be autoscaled based on the values currently being
plotted.
.PP
\f(CW<onoff>\fP is one of the keywords \f(CBon\fP or \f(CBoff\fP and the
\f(CBlegend\fP clause controls the presence or absence of the plot
legend to the right of the graph area.  The default is for the
legend to be shown.
After the view is loaded, the legend visibility
can be toggled using the
.I "Show Legend"
button in the
.I "Edit\(->Chart Title and Legend"
dialog.
.RE
.IP 5. 0.3i
.B pmchart
supports a \f(CBglobal\fP clause to specify the dimensions of the
top-level window and some other attributes of a saved view.
At this stage, there is no support for a \f(CBglobal\fP clause in
.BR kmchart .
.IP 6. 0.3i
Each \f(CBchart\fP, has one or more plots associated with it, as
defined by one of the following specifications:
.ES
\f(CBplot\fP
    [\f(CBlegend\fP <title>] [\f(CBcolor\fP <colorspec>] [\f(CBhost\fP <hostspec>]
    \f(CBmetric\fP <metricname>
    [ \f(CBinstance\fP <inst> | \f(CBmatching\fP <pat> | \f(CBnot-matching\fP <pat> ]
.EE
.RS
.PP
The keyword \f(CBplot\fP may be replaced with the keyword
\f(CBoptional-plot\fP, in which case if the source of performance data
does not include the specificified performance metric and/or instance,
then this plot is silently dropped from the chart.
.PP
If specified, the title will appear in the chart legend.
The \f(CW<title>\fP is usually enclosed in quotes (") and if it
contains the sequence ``%i'' this will be replaced by the metric
instance name (if any).
.PP
For
.B pmchart
configuration files, the keyword \f(CBtitle\fP must be used instead of
\f(CBlegend\fP.
.B kmchart
supports either keyword.
.PP
The \f(CBcolor\fP clause is optional for
.B kmchart
configuration files, but it is mandatory for
.B pmchart
configuration files.
\f(CW<colorspec>\fP may be one of the following:
.ES
\f(CB#-cycle\fP
\f(CBrgbi:\fPrr\f(CB:\fPgg\f(CB:\fPbb
\f(CB#\fPrgb
\f(CB#\fPrrggbb
\f(CB#\fPrrrgggbbb
\f(CB#\fPrrrrggggbbbb
<Xcolor>
.EE
where each of \f(CWr\fP, \f(CWg\fP and \f(CWb\fP are hexidecimal
digits (0-9 and A-F) representing respectively the red, green and
blue color components.
\f(CW<Xcolor>\fP is on of the color names from the X color database,
e.g. \f(CBred\fP or \f(CBsteelblue\fP, see also the output from
.BR showrgb (1).
.PP
The ``color'' \f(CB#-cycle\fP specifies that
.B kmchart
should use the next in a pallet of colors that it uses cyclically
for each chart.  This is the default if the \f(CBcolor\fP clause
is omitted.
.PP
The \f(CW<hostspec>\fP in the \f(CBhost\fP clause may be a hostname,
an IP address or an asterisk (*); the latter is used to mean the
default source of performance metrics.
For
.B pmchart
configuration files, the \f(CBhost\fP clause must be present, for
.B kmchart
configuration files it is optional, and if missing the default source
of performance metrics will be used.
.PP
The optional instance specification,
.IP (a) 0.3i
is omitted in which case one plot will be created for every instance of
the \f(CW<metricname>\fP metric
.IP (b) 0.3i
starts with \f(CBinstance\fP, in which case only the instance
named \f(CW<inst>\fP will be plotted
.IP (c) 0.3i
starts with \f(CBmatching\fP, in which case all instances whose
names match the pattern \f(CW<pat>\fP will be plotted; the pattern
uses extended regular expression notation in the style of
.BR egrep (1)
(refer to the PMCD view for an example)
.IP (d) 0.3i
starts with \f(CBnot-matching\fP, in which case all instances whose
names
.B do " " not
match the pattern \f(CW<pat>\fP will be plotted; the pattern
uses extended regular expression notation in the style of
.BR egrep (1)
(refer to the Netbytes view for an example)
.PP
.B pmchart
uses a bizarre syntactic notation where \f(CW<inst>\fP and
\f(CW<pat>\fP extend from the first non-white space character to the
end of the input line.  For
.B kmchart
configuration files these elements are either delimited by white
space, or enclosed in quotes (").
.RE
.IP 7. 0.3i
.SH "PCP ENVIRONMENT"
Environment variables with the prefix
.B PCP_
are used to parameterize the file and directory names
used by PCP.
On each installation, the file
.I /etc/pcp.conf
contains the local values for these variables.
The
.B $PCP_CONF
variable may be used to specify an alternative
configuration file,
as described in
.BR pcp.conf (4).
.SH SEE ALSO
.BR PCPIntro (1),
.BR pmval (1),
.BR pmdumptext (1),
.BR pmcd (1),
.BR pminfo (1),
.BR pcp.conf (4),
.BR pcp.env (4)
and
.BR pmns (4).
