'\"! tbl | nroff \-man
'\"macro stdmacro
.\"
.\" Copyright (c) 2009 Max Matveev
.\" 
.\" This program is free software; you can redistribute it and/or modify it
.\" under the terms of the GNU General Public License as published by the
.\" Free Software Foundation; either version 2 of the License, or (at your
.\" option) any later version.
.\" 
.\" This program is distributed in the hope that it will be useful, but
.\" WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
.\" or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
.\" for more details.
.\" 
.\"
.TH MMV 4 "" "Performance Co-Pilot"
.SH NAME
\f3mmv\f1 \- Memory Mapped Values for Performance Co-Pilot
.SH SYNOPSIS
.I $PCP_TMP_DIR/mmv/<file>
.SH DESCRIPTION
The files in \f2$PCP_TMP_DIR/mmv\f1 are generated by 
\f2mmv_stats_init\f1() function from \f3libpcp_mmv\f1 library. There could
be multiple files in this directory, each file representing a single source
of the performance metrics. The metrics are harvested by the \f2mmv\f1 PMDA
which exports them to the rest of the Performance Co-Pilot infrastructure.
.SH FILE FORMAT
Each file starts with the following header:
.TS
box,center;
c | c | c
n | n | l.
Offset	Length	Name
_
0	4	tag == "MMV\\0"
_
4	4	Version
_
8	8	Generation 1
_
16	8	Generation 2
_
24	4	Number of TOC entries
_
28	4	Flags
_
32	4	Process identifier
_
34	4	Cluster identifier
.TE
.PP
followed by at least 2 TOC sections: one section for metrics and
another for values. The TOC section has the following format:
.TS
box,center;
c | c | c
n | n | l.
Offset	Length	Value
_
0	4	Section Type (see \f2mmv_stats.h\f1)
_
4	4	Number of entries in the section
_
8	8	Section's offset for the start of the file
.TE
.PP
The section types are:
.IP
1:
Instances
.IP
2:
Metrics
.IP
3:
Values
.PP
The only mandatory sections are Metrics and Values, Instances section appears
only if there are metrics with multiple instances.
.PP
The entries in the Metrics section have the following format:
.TS
box,center;
c | c | c
n | n | l.
Offset	Length	Value
_
0	64	Metric Name
_
64	4	Metric Item (see \f2PMDA\f1(3))
_
68	4	Metric Type (see \f2mmv_stats.h\f1)
_
72	4	Semantics (see \f2PMAPI\f1(3))
_
76	4	Dimensions (see \f2PMAPI\f1(3))
_
80	4	Instance Domain ID (\-1 no instances)
_
84	4	Unused padding (zero filled)
_
88	8	Short help text offset
_
96	8	Long help text offset
.TE
.PP
The entries in the Values section have the following format:
.TS
box,center;
c | c | c
n | n | l.
Offset	Length	Value
_
0	8	Offset into the Metrics section.
_
8	8	Offset into the Instances section.
_
16	8	\f3pmAtom\f1 value (see \f2PMAPI\f1(3))
_
24	8	Extra space for STRING and INTEGRAL
.TE
.PP
The entries in the Instances section have the following format:
.TS
box,center;
c | c | c
n | n | l.
Offset	Length	Value
_
0	4	Internal instance identifier
_
4	64	External instance identifier
.TE
.PP
.SH SEE ALSO
.BR PCPIntro (1),
.BR PMAPI (3),
.BR mmv_stats_init (3),
.BR pcp.conf (4)
and
.BR pcp.env (4).
