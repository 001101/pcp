<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE>PCP Strip Charts Tutorial</TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 2.0  (Linux)">
	<META NAME="CREATED" CONTENT="20071020;12372700">
	<META NAME="CHANGEDBY" CONTENT="Nathan Scott">
	<META NAME="CHANGED" CONTENT="20071022;11365400">
	<META NAME="qrichtext" CONTENT="1">
	<STYLE TYPE="text/css">
	<!--
		TD P { color: #000060; font-family: "Sans Serif"; font-size: 15pt; font-style: normal; font-weight: medium }
		P { color: #000060; font-family: "Lucida Grande"; font-size: 15pt; font-style: normal; font-weight: medium }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-AU" TEXT="#000060" DIR="LTR">
<TABLE WIDTH=100% BORDER=0 CELLPADDING=0 CELLSPACING=0 STYLE="page-break-before: always">
	<TR>
		<TD WIDTH=32>
			<P><FONT COLOR="#000080"><A HREF="http://oss.sgi.com/projects/pcp/"><IMG SRC="images/kmcharticon.png" NAME="graphics1" ALIGN=BOTTOM WIDTH=51 HEIGHT=51 BORDER=0></A></FONT></P>
		</TD>
		<TD WIDTH=1>
			<P>&nbsp;&nbsp;</P>
		</TD>
		<TD>
			<P><A HREF="index.html"><FONT COLOR="#ff6600">Home</FONT></A>&nbsp;&middot;
			<A HREF="views.html"><FONT COLOR="#ff6600">Views</FONT></A>&nbsp;&middot;
			<A HREF="charts.html"><FONT COLOR="#ff6600">Charts</FONT></A>&nbsp;&middot;
			<A HREF="tabs.html"><FONT COLOR="#ff6600">Tabs</FONT></A>&nbsp;&middot;
			<A HREF="timecontrol.html"><FONT COLOR="#ff6600">Time Control</FONT></A></P>
		</TD>
		<TD WIDTH=230>
			<P ALIGN=RIGHT><FONT COLOR="#000080"><A HREF="http://www.aconex.com/"><IMG SRC="images/aconex.png" NAME="graphics2" ALIGN=BOTTOM WIDTH=186 HEIGHT=51 BORDER=0></A></FONT></P>
		</TD>
	</TR>
</TABLE>
<BR>
<TABLE WIDTH=800 BORDER=0 CELLPADDING=2 CELLSPACING=0 BGCOLOR="#e2e2e2">
	<COL WIDTH=400>
	<COL WIDTH=400>
	<TR>
		<TD WIDTH=400 HEIGHT=45 BGCOLOR="#081c59">
			<P ALIGN=LEFT><B><FONT SIZE=5 STYLE="font-size: 20pt"><FONT COLOR="#ffffff">Tutorial
			</FONT></FONT></B> 
			</P>
		</TD>
		<TD WIDTH=400 STYLE="background: url(images/bg02.png) repeat scroll">
			<P ALIGN=LEFT><BR>
			</P>
		</TD>
	</TR>
</TABLE>
<P>The following tutorial covers the basic
functionality available in the PCP Chart tool (kmchart).
Once PCP (Performance Co-Pilot), Qt, and kmchart are 
<A HREF="installation.html"><FONT COLOR="#000060">installed</FONT></A>, run the
<I>kmchart</I> command or click on the “<I>PCP Chart</I>” icon to
begin. 
</P>
<P><BR>
<P><B><FONT SIZE=4>Main Window</FONT></B> 
</P>
<P>On starting the PCP Chart (kmchart) tool with no command line
arguments, the initial display shows a menu, toolbar, and a live time
axis. The vacant area above the time axis is the blank canvas for
your charts – we'll get to this shortly, but take a moment to
digest the main window.</P>
<P STYLE="margin-left: 2cm">[insert kmchart images]</P>
<P>The time axis along the bottom of the window should be scrolling
with the current time, updated every second (this is also called the
<I>sample interval</I>). To the left of the time axis is the time
control status button. The blue arrow signifies that (live) time is
moving forward. Pressing the button once will show the Time Control
(kmtime) tool, pressing it a second time hides it. The time controls
allow you to modify various aspects of the flow of time in your
charts, and clearly displays the current time position.</P>
<P STYLE="margin-left: 2cm">[insert kmtime images]</P>
<P><B><FONT SIZE=4>Views</FONT></B> 
</P>
<P>The toolbar along the top of the window has a blue folder icon for
<I>Views</I>. Click on it, to bring up the “Open View” window.
This window initially displays a list of common performance views
(these are the pre-installed <I>System Views</I>). Select CPU and
Disk from the list (Ctrl-Click allows multiple selections to be
made), then press the OK button. The main window is now filled with
the two selected Views, showing several aspects of processor and disk
utilisation.</P>
<P><B>What is a view?</B></P>
<P>A view is a complete specification of every aspect of one or more
charts, each of which can contains one or more plots. All properties
of the charts and the individual plots are described - the data
source behind the performance data, the color of the plots, the chart
title, the style of the chart, whether the value axis (Y-Axis) should
be scaled, whether there is a title, etc, etc. Some properties are
optional (e.g. the title) and some can be specified as variable (e.g.
allowing any host to be the source of the data).</P>
<P>Views are stored as plain text files in the local filesystem. The
System Views are different only in that they are installed into a
fixed location. There is a fixed place for custom views as well,
below your home directory, where views you create in kmchart will be
stored. If you look into the <I>Open View</I> dialog again, you'll
see two icons to the right of the Path in the Open View dialog –
these indicate whether the current path points to the System View
location, the User View location, or neither. Notice how they update
as you navigate through your files.</P>
<P STYLE="margin-left: 2cm">[ Open View dialog images ]</P>
<P><B><FONT SIZE=4>Recording</FONT></B></P>
<P>Returning to the main window now, select the <I>Record</I> menu
option, and then <I>Start</I> recording. A recording captures live
performance data from the current View into an <B>archive folio. </B>A
folio is a group of one or more performance data archives (also
refered to as <B>logs</B> – which is an ambiguous term, so we'll
refer to them as archives from here on), a copy of the current View
specification, and a configuration file for the <B>pmlogger</B>
process which does the actual recording. A folio contains enough
state to be able to replay the recording at any time in the future,
exactly as it was recorded.</P>
<P>The <I>Start Recording</I> dialog allows you to set various
aspects of the recording session – we wont change these for now –
just press the OK button. You'll notice the Live Time Control button
in the botton left now displays a red light, indicating that
recording is in progress. Let's leave the recording run while we
investigate other parts of the tool – we'll come back to this
later, when its had a chance to gather some interesting data.</P>
<P><B><FONT SIZE=4>Saving Views</FONT></B></P>
<P>From the <I>File</I> menu select the <I>Save View</I> option. Save
the current two charts to a View named /tmp/ExampleView. In a
terminal window, take a look through the saved View configuration.</P>
<P STYLE="margin-left: 2cm">[ $ cat /tmp/ExampleView ]</P>
<P><B><FONT SIZE=4>Custom Charts</FONT></B></P>
<P>Click on the Disk Chart to highlight it, and then opt for the <I>Edit
Chart</I> menu item. A tabbed window with every setting for the Disk
chart is displayed. In the tree view on the left side of the window
are the metrics from our selected Disk chart. [ edit chart images ]
The three tabs on the right side of the window show the current
settings for this chart in three categories:</P>
<UL>
	<LI><P>Properties relating to the entire chart (Title, Legend
	settings, Y-Axis scaling, etc);</P>
	<LI><P>Available metrics (performance data) for plotting in the
	chart</P>
	<LI><P>Properties related to each individual chart plot (color,
	label)</P>
</UL>
<P>Dismiss the Edit Chart dialog – instead of modifying our
existing charts, we'll build one from the ground up.</P>
<P>Click on the <I>New Chart</I> option in the toolbar to display the
chart creation window – it is just like the chart editing window
we've just seen, except initially we have no metrics selected in the
chart, and default values for all of the chart properties.</P>
<P STYLE="margin-left: 2cm">[ initial new chart dialog ]</P>
<P>In the Available Metrics list on the Metrics tab, expand the
<I>kernel,</I> <I>all, load</I> trees from your local hosts metric
namespace, and then select the three load averages (<I>1, 5, 15
minutes</I>).  Since these are leaves in the namespace, and identify
valid values for plotting, several buttons now become enabled – in
particular the “Add Metric” button and the “Metric Info”
button.</P>
<P STYLE="margin-left: 2cm">[ new chart dialog with kernel.all.load.*
selected ]</P>
<P>Click on the “Metric Info” button to view the metric
descriptor (<I>pminfo</I>) and current values (<I>pmval</I>) for
disk.all.total.  Dismiss that dialog, and then press the “Add
Metric” button, to add this metric into the list of metrics for out
new chart.</P>
<P>A default color is selected (this is chosen from the charts Color
scheme, which can be set on the first tab) – this color can also be
explicitly set by:</P>
<UL>
	<LI><P>selecting the metric from the Chart Plots tree</P>
	<LI><P>selecting a new color from the color palette on the Plot tab</P>
	<LI><P>pressing the Apply color button</P>
</UL>
<P>This change can also be reverted by using the revert color button,
which returns it to its previous color (displayed alongside that
button).</P>
<P STYLE="margin-left: 2cm">[ new chart with alternate color and new
label ]</P>
<P>Set the label for the plots as “1 Min”, “5 Min” and “15
Min”, then press OK.  A new chart will appear at the bottom of the
main window with one plot, and on the next sample interval current
values will be plotted.</P>
<P STYLE="margin-left: 2cm">[ main window with kernel.all.load ]</P>
<P><FONT SIZE=4><B>Playback Recording</B></FONT></P>
<P>- Click on Record -&gt; Stop</P>
<P>        - Walk through the dialog from pmlogger</P>
<P>        - Discuss Query and Detach menu options</P>
<P>        - Note red light goes off</P>
<P><BR><BR>
</P>
<P>End kmchart session.</P>
<P><BR><BR>
</P>
<P>- run pmafm ~/.pcp/pmlogger/XXX.folio replay</P>
<P>        - Click on Archive Time Control push button to show kmtime</P>
<P>        - Show VCR controls</P>
<P>        - Show Time Bounds</P>
<P>        - Press Play</P>
<P>        - Increase Speed</P>
<P>        - Press Stop</P>
<P>        - Scroll to somewhere else in the archive</P>
<P>        - Press Back</P>
<P>        - Press Stop</P>
<P><BR><BR>
</P>
<P><FONT SIZE=4><B>Next Steps</B></FONT></P>
<P>This introductory tutorial has touched on the basics of using this
powerful utility.  Numerous functions have not been discussed at all,
or only briefly touched on – feel free to investigate these areas
in detail now:</P>
<UL>
	<LI><P>Try different chart styles</P>
	<LI><P>Multiple Tab Support</P>
	<LI><P>Monitoring multiple hosts simultaneously</P>
	<LI><P>Interface Customisation – toolbar and plot color selection,
	from the <I>Preferences</I> dialog.</P>
</UL>
<P><BR><BR>
</P>
<CENTER>
	<TABLE WIDTH=100% BORDER=0 CELLPADDING=0 CELLSPACING=0>
		<TR>
			<TD WIDTH=50%>
				<P>Copyright &copy; 2007 <A HREF="http://www.aconex.com/"><FONT COLOR="#000060">Aconex</FONT></A></P>
			</TD>
			<TD WIDTH=50%>
				<P ALIGN=RIGHT>kmchart</P>
			</TD>
		</TR>
	</TABLE>
</CENTER>
<P><BR><BR>
</P>
</BODY>
</HTML>
